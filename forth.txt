
import void CreateCanvas()
{
    var canvas = document.createElement('canvas');
    canvas.width = 800;
    canvas.height = 600;
    document.body.appendChild(canvas);
    var ctx = canvas.getContext('2d');
    globals.ctx = ctx;
}

import void Clear(int r, int g, int b)
{
    globals.ctx.fillStyle = 'rgb('+r+','+g+','+b+', 255)';
    globals.ctx.fillRect(0,0,globals.ctx.canvas.width, globals.ctx.canvas.height);
}

import void FillSquare(int x, int y, int radius, int r, int g, int b)
{
    globals.ctx.fillStyle = 'rgb('+r+','+g+','+b+', 255)';
    globals.ctx.fillRect(x-radius,y-radius,radius*2,radius*2);
}

import void RequestAnimationFrame()
{
    requestAnimationFrame(exports.Update);
}

int r { 0 }
int g { 0 }

export void Update()
{
    r load g load 0 Clear 
    RequestAnimationFrame
    r r load 3 + store 
    g g load 2 + store
    r load 255 >
    if
    {
        r 0 store 
    }
    g load 255 >
    if
    {
        g 0 store
    }
}

export void Main()
{
    CreateCanvas 0 0 0 Clear RequestAnimationFrame
}